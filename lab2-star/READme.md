Лабораторная работа 2 \* - Docker compose: плохие и хорошие практики

В рамках нашей работы нам нужно сделать:

1.  Написать "плохой" Docker compose файл, в котором есть не менее трех
    "bad practices" по их написанию

2.  Написать "хороший" Docker compose файл, в котором эти плохие
    практики исправлены

3.  В Readme описать каждую из плохих практик в плохом файле, почему она
    плохая и как в хорошем она была исправлена, как исправление повлияло
    на результат

4.  После предыдущих пунктов в хорошем файле настроить сервисы так,
    чтобы контейнеры в рамках этого compose-проекта так же поднимались
    вместе, но не \"видели\" друг друга по сети. В отчете описать, как
    этого добились и кратко объяснить принцип такой изоляции

Как я этого смог достичь спустя полмесяца перерыва со второй лабы я
настолько позабывал все, что, запуская контейнеры забыл включить
приложение и ломал голову почему же все так у меня в жизни плохо.

Шаги моей работы:

1)  Я создал довольно-таки плохой docker-compose, в котором была куча
    проблем, связанных с «плавающими версиями latest», пароли я сохранял
    прямо в этом же контейнере. А также забыл упомянуть то, что сети все
    в одной куче, а нам такого не нужно. (приложу скрин, чтобы не
    вставлять много текста, если так можно)

> ![Изображение выглядит как текст, снимок экрана, меню, Шрифт
> Содержимое, созданное искусственным интеллектом, может быть
> неверным.](./image1.png){width="4.439920166229221in"
> height="5.399097769028871in"}
>
> Конечно, он выглядит таким комфортным благодаря тому, что писать тут
> толком нечего не пришлось, да и выдумывать тоже, это, наверное,
> единственный плюс -- «эстетический»

2)  После плохого докер композа пишем хороший. Исправляем все ошибки

> ![Изображение выглядит как текст, снимок экрана, меню Содержимое,
> созданное искусственным интеллектом, может быть
> неверным.](./image2.png){width="3.4165758967629047in"
> height="5.929659886264217in"}

В файле «.env» занес наши временные переменные с паролем

![Изображение выглядит как текст, Шрифт, снимок экрана Содержимое,
созданное искусственным интеллектом, может быть
неверным.](./image3.png){width="6.496527777777778in"
height="0.8111111111111111in"}

3)  Пожалуй, самый интересный этап, в котором заключается вся изюминка
    этой лабораторной работы. Я стал думать, искать, а как же сделать
    изоляцию сети? Как сделать так, чтобы контейнеры запускались вместе,
    но при этом не видели друг друга?

Ответ «убил» - разные сети в docker

Весь замысел мой был в создании двух сетей: Frontend и Backend.

У меня были подключения:

Web -- Frontend

Db и redis -- Backend

Все было сделано, запуск совместный, а жизнь отдельна.

4)  Стоит сказать о проверке изоляции:

1\. Сначала я запустил контейнеры

> ![Изображение выглядит как текст, снимок экрана, программное
> обеспечение, Мультимедийное программное обеспечение Содержимое,
> созданное искусственным интеллектом, может быть
> неверным.](./image4.png){width="6.214562554680665in"
> height="4.095433070866142in"}
>
> 2\. На скрине выше видно, что потом я пытался пропинговать db из
> контейнера web, но результат был «ping:bad address 'db'»
>
> Подумал я, что что-то здесь не так, и действительно, я установил
> утилиту ping:
>
> docker exec web apk add iputils и результат был уже совсем другим!
>
> ![Изображение выглядит как текст, Шрифт, снимок экрана Содержимое,
> созданное искусственным интеллектом, может быть
> неверным.](./image5.png){width="6.496527777777778in"
> height="1.086111111111111in"}
>
> Это именно то, что я искал. Кратко объясняя, дверь связи между web и
> db окончательно закрылось.
>
> Из этой лабораторной я понял несколько важных моментов:
>
> \- Docker-compose это сильная вещь, интересная, но открыть ее
> потенциал может не каждый, над каждым действием и логикой надо думать.
>
> -Изоляция сети довольно-таки просто реализуема в реалиях большой
> сложности всего IT мира.
>
> -Постоянная практика это то, чего мне не хватает...
